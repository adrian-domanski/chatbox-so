(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{105:function(e,t,a){},132:function(e,t){},135:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(19),s=a.n(o),l=(a(76),a(77),a(10)),c=a(11),i=a(15),u=a(12),m=a(16),h=a(144),p=a(145),d=a(146),g=a(147),E=a(148),f=a(149),O=a(150),v=a(14),b=a(31),y=a.n(b),S=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(n){n({type:"RETURN_ERROR",payload:{status:e,msg:t,id:a}})}},j=function(){var e={headers:{"Content-Type":"application/json"}};if(localStorage.getItem("token")){var t=localStorage.getItem("token");e.headers["x-auth-token"]=t}return e},w=a(13),C=a(157),R=a(136),_=a(137),L=a(138),k=a(139),A=a(140),N=a(141),I=a(142),D=a(143),P=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,error:null,name:"",email:"",password:"",class:""},a.toggle=function(){a.setState(function(e){return{modal:!e.modal}})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.name,r=t.email,o=t.password;a.props.register({name:n,email:r,password:o})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.error.id!==e.error.id&&"REGISTER_FAIL"===this.props.error.id&&(this.setState({error:this.props.error.msg}),this.props.clearErrors(),setTimeout(function(){t.setState({error:null})},5e3))}},{key:"render",value:function(){var e=this.props.title,t=this.state,a=t.name,n=t.email,o=t.password,s=t.error;return r.a.createElement("div",null,r.a.createElement("div",{onClick:this.toggle},e),r.a.createElement(C.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},r.a.createElement(R.a,{toggle:this.toggle},"Registration Form"),r.a.createElement(_.a,null,s?r.a.createElement(L.a,{color:"danger"},s):null,r.a.createElement(k.a,null,r.a.createElement(A.a,null,r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement(N.a,{type:"text",id:"name",onChange:this.handleChange,value:a,name:"name"})),r.a.createElement(A.a,null,r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement(N.a,{type:"email",id:"email",onChange:this.handleChange,value:n,name:"email"})),r.a.createElement(A.a,null,r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement(N.a,{type:"password",id:"password",onChange:this.handleChange,value:o,name:"password"})))),r.a.createElement(I.a,null,r.a.createElement(D.a,{color:"success",onClick:this.handleSubmit},"Register")," ",r.a.createElement(D.a,{color:"danger",onClick:this.toggle},"Cancel"))))}}]),t}(n.Component),T=Object(v.b)(function(e){return{error:e.errorReducer}},function(e){return{register:function(t){return e(function(e){return function(t){t({type:"LOADING"}),y.a.post("/api/register",e,j()).then(function(e){t({type:"REGISTER_SUCCESS",payload:e.data})}).catch(function(e){t(S(e.response.status,e.response.data.msg,"REGISTER_FAIL")),t({type:"REGISTER_FAIL"})})}}(t))},clearErrors:function(){return e({type:"CLEAR_ERRORS"})}}})(P),U=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1,error:null,email:"",password:""},a.toggle=function(){a.setState(function(e){return{modal:!e.modal}})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.email,r=t.password;a.props.login({email:n,password:r})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this;this.props.error.id!==e.error.id&&"LOGIN_FAIL"===this.props.error.id&&(this.setState({error:this.props.error.msg}),this.props.clearErrors(),setTimeout(function(){t.setState({error:null})},5e3))}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,o=this.props.title;return r.a.createElement("div",null,r.a.createElement("div",{onClick:this.toggle},o),r.a.createElement(C.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},r.a.createElement(R.a,{toggle:this.toggle},"Login Form"),r.a.createElement(_.a,null,n?r.a.createElement(L.a,{color:"danger"},n):null,r.a.createElement(k.a,null,r.a.createElement(A.a,null,r.a.createElement("label",{htmlFor:"email"},"Email:"),r.a.createElement(N.a,{type:"email",id:"email",onChange:this.handleChange,value:t,name:"email"})),r.a.createElement(A.a,null,r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement(N.a,{type:"password",id:"password",onChange:this.handleChange,value:a,name:"password"})))),r.a.createElement(I.a,null,r.a.createElement(D.a,{color:"success",onClick:this.handleSubmit},"Log in")," ",r.a.createElement(D.a,{color:"danger",onClick:this.toggle},"Cancel"))))}}]),t}(n.Component),F=Object(v.b)(function(e){return{error:e.errorReducer}},function(e){return{login:function(t){return e((a=t,function(e){e({type:"LOADING"}),y.a.post("/api/login",a,j()).then(function(t){e({type:"LOGIN_SUCCESS",payload:t.data})}).catch(function(t){e(S(t.response.status,t.response.data.msg,"LOGIN_FAIL")),e({type:"LOGIN_FAIL"})})}));var a},clearErrors:function(){return e({type:"CLEAR_ERRORS"})}}})(U),G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isOpen:!1},a.toggle=function(){a.setState({isOpen:!a.state.isOpen})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{href:"#"},r.a.createElement(T,{title:"Register"}))),r.a.createElement(h.a,null,r.a.createElement(p.a,{href:"#"},r.a.createElement(F,{title:"Log In"})))),a=r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{href:"#",onClick:function(){return e.props.logout()}},"Logout"," ",r.a.createElement("strong",null,"(",this.props.isAuthenticated&&this.props.user.name,")")))),n=this.props.isAuthenticated;return r.a.createElement("div",null,r.a.createElement(d.a,{color:"dark",dark:!0,expand:"md"},r.a.createElement(g.a,{href:"/"},"ChatBox"),r.a.createElement(E.a,{onClick:this.toggle}),r.a.createElement(f.a,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(O.a,{className:"ml-auto",navbar:!0},n?a:t))))}}]),t}(n.Component),x=Object(v.b)(function(e){return{isAuthenticated:e.authReducer.isAuthenticated,user:e.authReducer.user,isLoading:e.authReducer.isLoading}},function(e){return{logout:function(){return e({type:"LOGOUT_SUCCESS"})}}})(G),M=a(70),B=a(151),H=(a(105),a(30)),V=a.n(H),X=V()("http://localhost:".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).PORT||5e3)),K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={newMessage:"",messages:[]},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.handleSubmit=function(e){e.preventDefault(),X.emit("input",{msg:a.state.newMessage,author:a.props.user.name,author_color:a.props.user.name_color}),a.setState({newMessage:""})},a.handleKeyPress=function(e){13===e.which&&a.handleSubmit(e)},a.scrollToBottom=function(){a.chat.scrollTop=a.chat.scrollHeight},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;X.on("output",function(t){e.setState({messages:t}),e.scrollToBottom()}),X.on("refresh",function(t){e.setState({messages:[].concat(Object(M.a)(e.state.messages),[t])}),e.scrollToBottom()})}},{key:"render",value:function(){var e=this,t=this.state.messages.length?this.state.messages.map(function(e){return r.a.createElement("div",{className:"message",key:e._id},r.a.createElement("strong",{style:{color:e.author_color}},e.author,": "),r.a.createElement("span",null,e.msg))}):"There aren't any messages yet - let's change that!",a=this.props.isAuthenticated,n=this.state.newMessage;return r.a.createElement("div",{className:"container py-5"},r.a.createElement("div",{className:"chatbox"},r.a.createElement(B.a,{for:"messages"},"Chat:"),r.a.createElement("div",{className:"messages",ref:function(t){return e.chat=t},id:"messages"},t),a?r.a.createElement(A.a,{className:"new_message_form"},r.a.createElement(B.a,{for:"newMessage"},"New message:"),r.a.createElement(N.a,{placeholder:"Say Hello...",type:"textarea",onChange:this.handleChange,name:"newMessage",id:"newMessage",value:n,onKeyPress:this.handleKeyPress}),r.a.createElement(D.a,{color:"success px-5",onClick:this.handleSubmit},"Send")):r.a.createElement("h3",{className:"text-center mt-5 tip"},"Please\xa0",r.a.createElement("a",{href:"/",onClick:function(e){return e.preventDefault()}},r.a.createElement(T,{title:"register"})),"\xa0or\xa0",r.a.createElement("a",{href:"/",onClick:function(e){return e.preventDefault()}},r.a.createElement(F,{title:"log in"})),"\xa0to add new message")))}}]),t}(n.Component),J=Object(v.b)(function(e){return{isAuthenticated:e.authReducer.isAuthenticated,user:e.authReducer.user}})(K),W=a(152),$=a(153),q=a(154),z=a(155),Q=a(156),Y=V()("http://localhost:".concat(Object({NODE_ENV:"production",PUBLIC_URL:""}).PORT||5e3)),Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={user_count:0,spamers:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;Y.on("active",function(t){var a=Math.floor(t/2);e.setState({user_count:a})}),Y.on("spamers",function(t){e.setState({spamers:t})})}},{key:"render",value:function(){var e=this.state,t=e.user_count,a=e.spamers,n=a.length?a.map(function(e,t){return r.a.createElement("li",{key:e._id},t+1,". ",e.name," (",e.msg_count,")")}):"Loading...";return r.a.createElement(W.a,{className:"info my-5"},r.a.createElement($.a,{tag:"h3",className:"text-center"},"Info:"),r.a.createElement(q.a,null,r.a.createElement(z.a,{className:"text-center"},r.a.createElement("strong",null,"Active users"),":"," ",r.a.createElement("span",{className:"text-success"},t)),r.a.createElement(z.a,{className:"text-center"},r.a.createElement("strong",null,"Spamers: ")),r.a.createElement("ul",{className:"text-center spamers"},n)),r.a.createElement(Q.a,{className:"text-muted text-center"},"Copyright \xa9 Adison"))}}]),t}(n.Component),ee=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.isAuthenticated||this.props.auth()}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(x,null),r.a.createElement("div",{className:"content"},r.a.createElement(J,null),r.a.createElement(Z,null)),r.a.createElement(T,null))}}]),t}(n.Component),te=Object(v.b)(function(e){return{isAuthenticated:e.authReducer.isAuthenticated}},function(e){return{auth:function(){return e(function(e){e({type:"LOADING"}),y.a.get("/api/auth",j()).then(function(t){e({type:"USER_LOADED",payload:t.data})}).catch(function(t){e(S(t.response.status,t.response.data.msg)),e({type:"AUTH_FAIL"})})})}}})(ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(20),ne=a(69);function re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?re(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):re(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var se={isAuthenticated:!1,user:null,token:localStorage.getItem("token"),isLoading:!0},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOADING":return oe({},e,{isLoading:!0});case"USER_LOADED":return oe({},e,{isAuthenticated:!0,user:t.payload,token:localStorage.getItem("token"),isLoading:!1});case"LOGIN_SUCCESS":case"REGISTER_SUCCESS":return localStorage.setItem("token",t.payload.token),oe({},e,{isAuthenticated:!0,user:t.payload.user,token:localStorage.getItem("token"),isLoading:!1});case"LOGIN_FAIL":case"AUTH_FAIL":case"LOGOUT_SUCCESS":return localStorage.removeItem("token"),oe({},e,{isAuthenticated:!1,user:null,token:null,isLoading:!1});case"LOADING":return oe({},e,{isLoading:!0});default:return e}};function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach(function(t){Object(w.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ue={msg:null,status:null,id:null},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RETURN_ERROR":var a=t.payload,n=a.msg,r=a.status,o=a.id;return ie({},e,{msg:n,status:r,id:o});case"CLEAR_ERRORS":return{msg:null,status:null,id:null};default:return e}},he=Object(ae.c)({authReducer:le,errorReducer:me}),pe=Object(ae.e)(he,Object(ae.d)(Object(ae.a)(ne.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));s.a.render(r.a.createElement(v.a,{store:pe},r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},71:function(e,t,a){e.exports=a(135)},77:function(e,t,a){}},[[71,1,2]]]);
//# sourceMappingURL=main.dcc3a30c.chunk.js.map